(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(8081)}])},8081:function(e,s,t){"use strict";t.r(s),t.d(s,{__N_SSP:function(){return M},default:function(){return A}});var n=t(5893),r=t(9008),a=t.n(r),i=t(7294),c=t(603),l=t(3153),o=t(3299),u=t(7539),d=t.n(u),x=["user-read-email","playlist-read-private","playlist-read-collaborative","streaming","user-read-private","user-library-read","user-top-read","user-read-playback-state","user-modify-playback-state","user-read-currently-playing","user-read-recently-played","user-follow-read"].join(","),m=(new URLSearchParams({scope:x}).toString(),new(d())({clientId:"a40d4180d92e438084e443d4047e417a",clientSecret:"7bdf335a5d89474b8b782ce25fe6a908"}));var f=function(){var e=(0,o.useSession)(),s=e.data;return e.status,(0,i.useEffect)((function(){s&&("RefreshAccessTokenError"===s.error&&(0,o.signIn)(),m.setAccessToken(s.user.accessToken))}),[s]),m},h=t(2804),v=(0,h.cn)({key:"playlistIdState",default:"37i9dQZEVXbMDoHDwVN2tF"}),p=(0,h.cn)({key:"playlistState",default:null});var j=function(){var e=f(),s=(0,o.useSession)(),t=s.data,r=(s.status,(0,i.useState)([])),a=r[0],u=r[1],d=(0,c.Z)((0,h.FV)(v),2),x=(d[0],d[1]);return(0,i.useEffect)((function(){e.getAccessToken()&&e.getUserPlaylists().then((function(e){u(e.body.items)}))}),[t,e]),(0,n.jsx)("div",{className:"text-gray-400 p-5 text-xs lg:text-sm border-r border-gray-400 overflow-y-scroll h-screen scrollbar-hide bg-black md:min-w-[30%] lg:min-w-[20rem] hidden md:inline-flex pb-36",children:(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("button",{className:"flex items-center space-x-1 hover:text-white",children:[(0,n.jsx)(l.tvw,{className:"h-5 w-5"}),(0,n.jsx)("p",{children:"Inicio"})]}),(0,n.jsxs)("button",{className:"flex items-center space-x-1 hover:text-white",children:[(0,n.jsx)(l.W1M,{className:"h-5 w-5"}),(0,n.jsx)("p",{children:"Buscar"})]}),(0,n.jsxs)("button",{className:"flex items-center space-x-1 hover:text-white",children:[(0,n.jsx)(l.VqP,{className:"h-5 w-5"}),(0,n.jsx)("p",{children:"Tu biblioteca"})]}),(0,n.jsx)("hr",{className:"border-t-[0.1px] border-gray-400"}),(0,n.jsxs)("button",{className:"flex items-center space-x-1 hover:text-white",children:[(0,n.jsx)(l.wl8,{className:"h-5 w-5"}),(0,n.jsx)("p",{children:"Crear Lista"})]}),(0,n.jsxs)("button",{onClick:function(){return x(null)},className:"flex items-center space-x-1 hover:text-white",children:[(0,n.jsx)(l.h_8,{className:"h-5 w-5"}),(0,n.jsx)("p",{children:"Canciones que te gustan"})]}),(0,n.jsx)("hr",{className:"border-t-[0.1px] border-gray-400"}),a.map((function(e){return(0,n.jsx)("p",{onClick:function(){return x(e.id)},className:"cursor-pointer hover:text-white",children:e.name},e.id)}))]})})},g=t(6486),y=t.n(g),b=t(7568),N=t(4051),k=t.n(N);function w(e){var s=Math.floor(e/6e4),t=(e%6e4/1e3).toFixed(0);return 60==t?s+1+":00":s+":"+(t<10?"0":"")+t}var C=(0,h.cn)({key:"currentTrackIdState",default:null}),S=(0,h.cn)({key:"isPlayingState",default:!1});t(6300),t(2749);function _(e){var s,t="";for(s=0;s<e.length;s++)void 0!=e[s].name&&(t=t+" "+e[s].name,s+1<e.length&&(t+=","));return t}var E=function(e){var s=e.order,t=e.track,r=e.playlist,a=f(),i=(0,c.Z)((0,h.FV)(C),2),l=(i[0],i[1]),o=(0,c.Z)((0,h.FV)(S),2),u=(o[0],o[1]),d=function(){var e=(0,b.Z)(k().mark((function e(){var n;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(l(t.track.id),u(!0),a.play({uris:[t.track.uri]}),n=s+1;n<r.tracks.items.length;n++)a.addToQueue(r.tracks.items[n].track.uri);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,n.jsxs)("div",{className:"grid grid-cols-2 text-gray-400 py-3 px-2 hover:bg-gray-600 rounded-lg cursor-pointer",onClick:d,children:[(0,n.jsxs)("div",{className:"flex items-center space-x-4 ",children:[(0,n.jsx)("p",{children:s+1}),(0,n.jsx)("img",{className:"h-10 w-10",src:t.track.album.images[0].url}),(0,n.jsxs)("div",{className:"pr-1",children:[(0,n.jsx)("p",{className:"w-36 lg:w-64 truncate text-white ",children:t.track.name}),(0,n.jsx)("p",{className:"w=40 text-sm",children:_(t.track.artists)})]})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between ml-auto md:ml-0",children:[(0,n.jsx)("p",{className:"w-50 hidden md:inline",children:t.track.album.name}),(0,n.jsx)("p",{children:w(t.track.duration_ms)})]})]})};var T=function(){var e=(0,h.sJ)(p);return(0,n.jsx)("div",{className:"px-8 flex flex-col space-y-1 pb-28 text-white",children:null===e||void 0===e?void 0:e.tracks.items.map((function(s,t){return(0,n.jsx)(E,{track:s,order:t,playlist:e},s.track.id)}))})},P=["from-indigo-500","from-blue-500","from-green-500","from-red-500","from-yellow-500","from-pink-500","from-purple-500"];var V=function(){var e,s=(0,o.useSession)(),t=s.data,r=(s.status,f()),a=(0,i.useState)(null),u=a[0],d=a[1],x=(0,c.Z)((0,h.FV)(v),2),m=x[0],j=(x[1],(0,c.Z)((0,h.FV)(p),2)),y=j[0],b=j[1];return(0,i.useEffect)((function(){d((0,g.shuffle)(P).pop())}),[m]),(0,i.useEffect)((function(){r.getPlaylist(m).then((function(e){b(e.body)})).catch((function(e){return console.log("Error",e)}))}),[r,m]),(0,n.jsxs)("div",{className:"flex-grow h-screen overflow-y-scroll scrollbar-hide",children:[(0,n.jsx)("header",{className:"absolute top-5 right-8",children:(0,n.jsxs)("div",{className:"text-white flex item-center bg-black space-x-3 opacity-90 hover:opacity-70 cursor-pointer rounded-full p-1 pr-2 items-center",onClick:o.signOut,children:[(0,n.jsx)("img",{className:"rounded-full w-10 h-10",src:null===t||void 0===t?void 0:t.user.image,alt:""}),(0,n.jsx)("h2",{children:null===t||void 0===t?void 0:t.user.name}),(0,n.jsx)(l.R0g,{className:"h-5 w-5"})]})}),(0,n.jsxs)("section",{className:"flex items-end space-x-7 bg-gradient-to-b to-gray ".concat(u," h-80 text-white p-8"),children:[(0,n.jsx)("img",{className:"h-44 w-44 shadow-2xl md:w-52 md:h-52",src:null===y||void 0===y||null===(e=y.images)||void 0===e?void 0:e[0].url,alt:""}),(0,n.jsxs)("div",{className:"p-5 space-y-2",children:[(0,n.jsx)("h1",{className:"text-2xl md:text-3xl xl:text-5xl font-bold",children:null===y||void 0===y?void 0:y.name}),(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsx)("p",{className:"hover:underline",children:null===y||void 0===y?void 0:y.owner.display_name}),(0,n.jsx)("p",{children:"|"}),(0,n.jsxs)("p",{children:[null===y||void 0===y?void 0:y.tracks.total," canciones"]})]})]})]}),(0,n.jsx)("div",{children:(0,n.jsx)(T,{})})]})};var Z=function(){var e=f(),s=(0,c.Z)((0,h.FV)(C),2),t=s[0],n=(s[1],(0,i.useState)(null)),r=n[0],a=n[1];return(0,i.useEffect)((function(){var s=function(){var s=(0,b.Z)(k().mark((function s(){var n;return k().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(!t){s.next=5;break}return s.next=3,fetch("https://api.spotify.com/v1/tracks/".concat(t),{headers:{Authorization:"Bearer ".concat(e.getAccessToken())}}).then((function(e){return e.json()}));case 3:n=s.sent,a(n);case 5:case"end":return s.stop()}}),s)})));return function(){return s.apply(this,arguments)}}();s()}),[t,e]),r};var F=function(){var e,s,t,r=f(),a=(0,o.useSession)(),u=a.data,d=(a.status,(0,c.Z)((0,h.FV)(C),2)),x=d[0],m=d[1],v=(0,c.Z)((0,h.FV)(S),2),p=v[0],j=v[1],g=(0,i.useState)(!1),b=g[0],N=g[1],k=(0,i.useState)(50),_=k[0],E=k[1],T=(0,i.useState)(0),P=(T[0],T[1],Z()),V=function(){r.getMyCurrentPlayingTrack().then((function(e){var s,t;m(null===(s=e.body)||void 0===s||null===(t=s.item)||void 0===t?void 0:t.id),r.getMyCurrentPlaybackState().then((function(e){var s;j(null===(s=e.body)||void 0===s?void 0:s.is_playing)}))}))},F=function(){r.getMyCurrentPlaybackState().then((function(e){var s;(null===e||void 0===e||null===(s=e.body)||void 0===s?void 0:s.is_playing)?(r.pause(),j(!1)):(r.play(),j(!0))}))};return(0,i.useEffect)((function(){r.getAccessToken()&&!x&&(V(),E(50))}),[x,r,u]),(0,i.useEffect)((function(){}),[_]),(0,i.useCallback)(y()((function(e){r.setVolume(e).catch((function(e){}))}),250),[]),(0,n.jsxs)("div",{className:"h-24 bg-gradient-to-b from-black to-gray-900 text-white grid grid-cols-3 text-xs md:text-base px-2 md:px-8",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"flex items-center space-x-4",children:(0,n.jsx)("img",{className:"hidden md:inline h-10 w-10",src:null===(e=null===P||void 0===P?void 0:P.album.images)||void 0===e?void 0:e[0].url,alt:""})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{children:null===P||void 0===P?void 0:P.name}),(0,n.jsx)("p",{children:null===P||void 0===P||null===(s=P.artists)||void 0===s||null===(t=s[0])||void 0===t?void 0:t.name})]})]}),(0,n.jsxs)("div",{className:"",children:[(0,n.jsxs)("div",{className:"flex space-x-5 justify-center py-3",children:[(0,n.jsx)("p",{children:"00:00"}),(0,n.jsx)("input",{className:"lg:w-[25rem]",type:"range",value:null,onInputCapture:function(e){return r.seek(e.target.value)},min:0,max:null===P||void 0===P?void 0:P.duration_ms}),(0,n.jsx)("p",{children:w(null===P||void 0===P?void 0:P.duration_ms)})]}),(0,n.jsxs)("div",{className:"flex items-center justify-evenly",children:[(0,n.jsx)(l.aK0,{className:"button"+(b?" text-green-400":""),onClick:function(){return r.setShuffle(!b),void N(!b)}}),(0,n.jsx)(l.o03,{onClick:function(){return r.skipToPrevious()},className:"button"}),p?(0,n.jsx)(l.fpf,{onClick:function(){y()(F(),500)},className:"button w-10 h-10"}):(0,n.jsx)(l.o1U,{onClick:function(){y()(F(),500)},className:"button w-10 h-10 "}),(0,n.jsx)(l.D6v,{onClick:function(){r.skipToNext(),V()},className:"button"}),(0,n.jsx)(l.HA9,{className:"button"})]})]}),(0,n.jsxs)("div",{className:"flex items-center justify-end space-x-3 pr-5 md:space-x-4",children:[(0,n.jsx)(l.MCl,{onClick:function(){_>0&&E(_-10)},className:"button w-4 h-4"}),(0,n.jsx)("input",{className:"w-16 md:w-28 lg:w-36",type:"range",value:_,onChange:function(e){return E(Number(e.target.value))},min:0,max:100}),(0,n.jsx)(l.MCl,{onClick:function(){_<100&&E(_+10)},className:"button"})]})]})},M=!0;function A(){return(0,n.jsxs)("div",{className:"bg-gray-700 h-screen overflow-hidden",children:[(0,n.jsxs)(a(),{children:[(0,n.jsx)("title",{children:"Sp0t1fy"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsxs)("main",{className:"flex ",children:[(0,n.jsx)(j,{}),(0,n.jsx)(V,{})]}),(0,n.jsx)("div",{className:"sticky bottom-0",children:(0,n.jsx)(F,{})})]})}},4654:function(){}},function(e){e.O(0,[662,327,774,888,179],(function(){return s=5557,e(e.s=s);var s}));var s=e.O();_N_E=s}]);